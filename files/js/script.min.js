window.FOS=window.FOS||{},FOS.item=FOS.item||{},FOS.item.progressBar=function(){const e=100,t="fos_prb_progress_complete";let n=function(e,t=!1){let n,r=e.split("-"),o="";if(r.length<1)return o;t&&(r[0]=r[0][0].toUpperCase()+r[0].substr(1));for(let e=0;e<r.length;e++)n=r[e],e>0&&(n=n[0].toUpperCase()+n.substring(1)),o+=n;return o},r=function(e){return"custom"==e?"Path":n(e,!0)},o=function(e,t){let n;return n="on-element"==e||"on-element"==t?"fos-prb-on-element":"above-element"==e?"fos-prb-above-element":"fos-prb-below-element",n},s=function(t,n){let r=parseInt(n)||0;return r>=e?e:r<=0?0:r},a=function(e,t=0){let n=parseInt(t)<=1?Math.round(100*t):t;return s(e,n)};return{init:function(i,l){i.strokeWidth=10,i.trailWidth=10,i.msgColor="#000000",i.msg=i.msg||"Loading...",i.autoStartInterval=!1,i.lastEndInterval=50,l&&l instanceof Function&&l.call(this,i);let u,f,c=i.name,g=$("#"+c),p=$("#"+c+"_CONTAINER"),m=$("#"+c+"_WRAPPER"),h=c+"_WRAPPER",d=p.find(".fos-prb-container"),b=function(e,t){let n=$('<span class="fos-prb-'+t+'-box"></span>');return"above-element"==e?d.prepend(n):"below-element"==e&&d.append(n),n},v=function(e,t=i.msg){let n=$("<span></span>");return f&&(f.text(a(c,e)+"%"),"on-element"==i.showPct&&n.append(f)),u&&"on-element"==i.showMsg&&n.append(u),n[0]};i.height&&""!=i.height&&m.css("height",i.height);let x={strokeWidth:i.strokeWidth,easing:n(i.animation),duration:parseInt(i.duration),color:i.color,trailColor:i.trailColor,trailWidth:i.trailWidth,svgStyle:{width:"100%",height:"100%"}};if("gradient"==i.style&&(x.from={color:i.color},x.to={color:i.endColor}),x.step=(e,t)=>{(f||u)&&"function"==typeof t.setText&&t.setText(v(t.value())),"gradient"==i.style&&t.path.setAttribute("stroke",e.color)},"no"!=i.showPct&&(f=b(i.showPct,"pct")),"no"!=i.showMsg&&(u=b(i.showMsg,"msg")),"on-element"!=i.showPct&&"on-element"!=i.showMsg||(x.text={value:v(i.pctValue,i.msg),className:o(i.showPct,i.showMsg),alignToBottom:!1,autoStyleContainer:!0,style:{color:i.msgColor}}),"custom"==i.shape){let e=m.find("path");if(h=c+"_fosPrbPath",0==e.length)return;e[2==e.length?1:0].setAttribute("id",h)}let w=new(ProgressBar[r(i.shape)])("#"+h,x);"custom"==i.shape&&(w.setText=function(e){});let I=s(c,i.pctVal)/100;w.set(I);let _=p.find(".fos-prb-msg-box");_.length>0&&_.text(i.msgVal||i.msg);let P,S=[],T=!1;function O(){T=!0,0!=S.length?w.animate(S[0].animateValue,(function(){S[0].newValue==e&&apex.event.trigger("#"+c,t),S.shift(),O()})):T=!1}apex.item.create(c,{getValue:function(){return g.val()},setValue:function(n){if(u&&("string"==typeof n||n instanceof String)){let e=n.split(":");e.length>1&&setTimeout((function(){_.text(e.slice(1).join(":"))}),i.duration)}let r=s(c,n);g.val(r);let o=r/100;i.queueAnimations?(S.push({animateValue:o,newValue:r}),T||O()):w.animate(o,(function(){r==e&&apex.event.trigger("#"+c,t)}))},getMessage:function(){return u?u.text():""},setMessage:function(e){u&&_.text(e)},getInstance:function(){return w},refresh:function(){let e=this,t=apex.server.plugin(i.ajaxId,{pageItems:i.itemsToSubmit},{refreshObject:"#"+c,refreshObjectData:i});apex.event.trigger("#"+c,"fos_prb_before_refresh",i),t.done((function(t){t.success&&(e.setValue(t.value||0),t.msg&&setTimeout((function(){e.callbacks?e.callbacks.setMessage(t.msg):e.setMessage(t.msg)}),i.duration))})).fail((function(e,t,n){apex.debug.error("FOS - Progress Bar - Refresh failed: "+n)})).always((function(){apex.event.trigger("#"+c,"fos_prb_after_refresh",i)}))},startInterval:function(){i.addTimer&&V()},endInterval:function(){i.addTimer&&(clearInterval(P),P="")}});let V=function(){if(P)return void apex.debug.info("FOS - Progress Bar: The interval is already running.");let e=parseInt(i.refreshInterval),t=parseInt(i.numOfReps||0),n=0;P=setInterval((function(){if(n++,"progress-is-complete"==i.repetitions){if(parseInt(apex.item(c).getValue())>=100)return void M(P)}else if("number-of-repetitions"==i.repetitions&&t<=n)return void M(P);n>i.lastEndInterval?M(P):apex.item(c).refresh()}),e)};i.addTimer&&i.autoStartInterval&&V();let M=function(){clearInterval(P),P="",apex.event.trigger("#"+c,"fos_prb_interval_over")}}}}();
//# sourceMappingURL=script.js.map

